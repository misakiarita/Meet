<p id="notice"><%= notice %></p>

<h1>Pets</h1>
<%= form_with( model:Pet.new, local: true, method: :get, url: pets_path) do |f| %>
  <table>
  <th>種類: <%= f.select :dog_or_cat, [[""], ["犬"], ["猫"]] %></th>
  <th>qualify age: <%= f.text_field :qualify_age, min:0 %></th>
  <th>都道府県: <%= f.select :pet_address, Pet.addresses.keys, include_blank: true %></th>

  </table>
  <%= f.submit '検索', class: 'btn btn-primary' %>
<% end %>
  <table>
  <thead>
    <tr>
      <th>Pet name</th>
      <th>Pet address</th>
      <th>Qualify age</th>
      <th>Status</th>
      <th>Price</th>
      <th>Species</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @pets.each do |pet| %>
      <tr>
        <td><%= pet.pet_name %></td>
        <td><%= pet.pet_address %></td>
        <td><%= pet.qualify_age %></td>
        <td><%= pet.status %></td>
        <td><%= pet.price %></td>
        
        <% if Feature.find_by(pet_id: pet.id).present? %>  
        <% @feature = Feature.find_by(pet_id: pet.id) %>
        <td><%= @feature.dog_or_cat %></td>
        <% else %>
        <td>なし！</td>        
        <% end %>
  <% if current_user.present? %>
        <td><%= link_to 'Show', pet %></td>
        <td><%= link_to 'Edit', edit_pet_path(pet) %></td>
        <td><%= link_to 'Destroy', pet, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  <% end %>

        </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Pet', new_pet_path %>
